<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajouter un article - ESCIC-Market</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Nunito', sans-serif;
        }
        .form-card {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        .form-card:hover {
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .valid-field {
            border-color: #10B981;
        }
        .invalid-field {
            border-color: #EF4444;
        }
        .image-preview {
            transition: all 0.2s ease;
        }
        .image-preview:hover {
            transform: scale(1.03);
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
        .category-icon {
            transition: all 0.2s ease;
        }
        .category-icon:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="#" class="flex-shrink-0 flex items-center">
                        <i class="fas fa-store text-blue-600 text-xl mr-2"></i>
                        <span class="font-bold text-blue-800">ESCIC-Market</span>
                    </a>
                </div>
                <div class="hidden md:ml-6 md:flex md:items-center">
                    <a class="ml-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" href="Vendeur.html">
                        <i class="fas fa-home mr-2"></i> Mon kiosque
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <!-- Page Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900">Ajouter un nouvel article √† ton kiosque</h1>
            <p class="mt-2 text-lg text-gray-600">Rends ton produit visible par tous les √©tudiants de l'ESCIC</p>
        </div>

        <!-- Progress Bar (Bonus Feature) -->
        <div class="mb-6">
            <div class="flex justify-between mb-1">
                <span class="text-sm font-medium text-gray-700">Progression</span>
                <span class="text-sm font-medium text-gray-700">25%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div class="progress-bar bg-blue-600 h-2.5 rounded-full" style="width: 25%"></div>
            </div>
        </div>

        <!-- Form Card -->
        <div class="form-card bg-white rounded-lg p-6 md:p-8 mb-8">
            <!-- Basic Information Section -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">üìå Informations de base</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Product Name -->
                    <div>
                        <label for="product-name" class="block text-sm font-medium text-gray-700 mb-1">Nom du produit</label>
                        <input type="text" id="product-name" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="Ex : Calculatrice FX-991EX">
                        <p class="mt-1 text-xs text-gray-500">Donne un nom clair et pr√©cis √† ton article</p>
                    </div>
                    
                    <!-- Category -->
                    <div>
                        <label for="product-category" class="block text-sm font-medium text-gray-700 mb-1">Cat√©gorie</label>
                        <select id="product-category" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                            <option value="">S√©lectionner une cat√©gorie</option>
                            <option value="books">üìö Livres</option>
                            <option value="clothes">üëï V√™tements</option>
                            <option value="electronics">üéß √âlectronique</option>
                            <option value="snacks">üç´ Snacks</option>
                            <option value="accessories">üëú Accessoires</option>
                            <option value="other">üîç Autre</option>
                        </select>
                    </div>
                    
                    <!-- Price -->
                    <div>
                        <label for="product-price" class="block text-sm font-medium text-gray-700 mb-1">Prix (FCFA)</label>
                        <div class="relative rounded-md shadow-sm">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <span class="text-gray-500 sm:text-sm">FCFA</span>
                            </div>
                            <input type="number" id="product-price" class="focus:ring-blue-500 focus:border-blue-500 block w-full pl-16 pr-12 py-2 border-gray-300 rounded-md" placeholder="0">
                        </div>
                    </div>
                    
                    <!-- Quantity -->
                    <div>
                        <label for="product-quantity" class="block text-sm font-medium text-gray-700 mb-1">Quantit√© (optionnel)</label>
                        <input type="number" id="product-quantity" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" value="1" min="1">
                    </div>
                </div>
            </div>

            <!-- Photos Section -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">üñºÔ∏è Photos</h2>
                <p class="text-sm text-gray-600 mb-4">Ajoute 1 √† 4 photos de qualit√© (JPG, PNG - max 3 Mo)</p>
                
                <!-- Image Upload Area -->
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center" id="drop-area">
                    <div class="flex flex-col items-center justify-center">
                        <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                            <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <p class="mt-1 text-sm text-gray-600">Glisser-d√©poser vos images ici</p>
                        <p class="mt-1 text-xs text-gray-500">ou</p>
                        <label for="file-upload" class="mt-2 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 cursor-pointer">
                            <i class="fas fa-camera mr-2"></i> Choisir une image
                        </label>
                        <input id="file-upload" type="file" class="hidden" accept="image/*" multiple>
                    </div>
                </div>
                
                <!-- Image Previews -->
                <div class="mt-4 grid grid-cols-2 sm:grid-cols-4 gap-4" id="image-previews">
                    <!-- Images will appear here -->
                </div>
                
                <!-- Add Another Photo Button -->
                <button id="add-another-photo" class="mt-4 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                    <i class="fas fa-plus mr-2"></i> Ajouter une autre photo
                </button>
            </div>

            <!-- Description Section -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">üìù Description</h2>
                <textarea id="product-description" rows="4" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="Ex : Calculatrice presque neuve, tr√®s utile pour les maths financi√®res. Achet√©e en 2024."></textarea>
                <p class="mt-1 text-xs text-gray-500">D√©cris ton article avec pr√©cision pour attirer plus d'acheteurs</p>
            </div>

            <!-- Delivery Section -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">üìç Lieu de remise</h2>
                <select id="delivery-location" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                    <option value="">S√©lectionner un lieu de remise</option>
                    <option value="library">Devant la biblioth√®que üìö</option>
                    <option value="cafeteria">Caf√©t√©ria üç¥</option>
                    <option value="hall">Hall principal üèõÔ∏è</option>
                    <option value="other">Autre</option>
                </select>
                
                <!-- Other Location Field (shown when "Autre" is selected) -->
                <div id="other-location-container" class="mt-4 hidden">
                    <label for="other-location" class="block text-sm font-medium text-gray-700 mb-1">Pr√©cisez le lieu</label>
                    <input type="text" id="other-location" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="Ex : Devant le b√¢timent B">
                </div>
            </div>

            <!-- Availability Section (Optional) -->
            <div class="mb-8">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">üïê Disponibilit√© horaire <span class="text-sm font-normal text-gray-500">(optionnel)</span></h2>
                <input type="text" id="availability" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="Ex : tous les jours entre 12h et 14h">
            </div>

            <!-- Help Section (Bonus Feature) -->
            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fas fa-exclamation-circle text-yellow-400"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm text-yellow-700">
                            <span class="font-medium">Besoin d'aide pour vendre ton article ?</span> 
                            <a href="#" class="font-medium underline text-yellow-700 hover:text-yellow-600">Consulter le guide</a>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="flex justify-center">
                <button id="submit-button" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    <i class="fas fa-paper-plane mr-2"></i> Publier mon article
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
        <div class="bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:max-w-lg sm:w-full">
            <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                <div class="sm:flex sm:items-start">
                    <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10">
                        <i class="fas fa-check text-green-600"></i>
                    </div>
                    <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                        <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">Article publi√© avec succ√®s !</h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-500">Ton article est maintenant visible sur ESCIC-Market ! Tu recevras une notification d√®s qu'un √©tudiant souhaite le r√©server.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                <a href="#" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm">
                    <i class="fas fa-store mr-2"></i> Voir mon kiosque
                </a>
                <button id="add-another" type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                    <i class="fas fa-plus mr-2"></i> Ajouter un autre article
                </button>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const fileUpload = document.getElementById('file-upload');
        const dropArea = document.getElementById('drop-area');
        const imagePreviews = document.getElementById('image-previews');
        const addAnotherPhotoBtn = document.getElementById('add-another-photo');
        const deliveryLocation = document.getElementById('delivery-location');
        const otherLocationContainer = document.getElementById('other-location-container');
        const submitButton = document.getElementById('submit-button');
        const successModal = document.getElementById('success-modal');
        const addAnotherBtn = document.getElementById('add-another');
        
        // Variables
        let uploadedFiles = [];
        
        // Event Listeners
        
        // Drag and drop functionality
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });
        
        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
        
        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false);
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false);
        });
        
        function highlight() {
            dropArea.classList.add('border-blue-500', 'bg-blue-50');
        }
        
        function unhighlight() {
            dropArea.classList.remove('border-blue-500', 'bg-blue-50');
        }
        
        dropArea.addEventListener('drop', handleDrop, false);
        
        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            handleFiles(files);
        }
        
        fileUpload.addEventListener('change', function() {
            handleFiles(this.files);
        });
        
        addAnotherPhotoBtn.addEventListener('click', function() {
            fileUpload.click();
        });
        
        deliveryLocation.addEventListener('change', function() {
            if (this.value === 'other') {
                otherLocationContainer.classList.remove('hidden');
            } else {
                otherLocationContainer.classList.add('hidden');
            }
        });
        
        submitButton.addEventListener('click', function() {
            // Show loading spinner
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Publication en cours...';
            submitButton.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                // Show success modal
                successModal.classList.remove('hidden');
                
                // Reset button
                submitButton.innerHTML = '<i class="fas fa-paper-plane mr-2"></i> Publier mon article';
                submitButton.disabled = false;
            }, 1500);
        });
        
        addAnotherBtn.addEventListener('click', function() {
            successModal.classList.add('hidden');
            // Reset form (in a real app, you might want to keep some fields)
            document.getElementById('product-name').value = '';
            document.getElementById('product-category').value = '';
            document.getElementById('product-price').value = '';
            document.getElementById('product-quantity').value = '1';
            document.getElementById('product-description').value = '';
            document.getElementById('delivery-location').value = '';
            document.getElementById('other-location').value = '';
            document.getElementById('availability').value = '';
            
            // Clear images
            uploadedFiles = [];
            imagePreviews.innerHTML = '';
            
            // Scroll to top
            window.scrollTo(0, 0);
        });
        
        // Functions
        function handleFiles(files) {
            if (uploadedFiles.length + files.length > 4) {
                alert('Vous ne pouvez ajouter que 4 photos maximum');
                return;
            }
            
            [...files].forEach(file => {
                if (!file.type.match('image.*')) {
                    alert('Seules les images sont accept√©es');
                    return;
                }
                
                if (file.size > 3 * 1024 * 1024) {
                    alert('La taille maximale d\'une image est de 3 Mo');
                    return;
                }
                
                uploadedFiles.push(file);
                previewImage(file);
            });
        }
        
        function previewImage(file) {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onloadend = function() {
                const previewDiv = document.createElement('div');
                previewDiv.className = 'relative group';
                
                const img = document.createElement('img');
                img.src = reader.result;
                img.className = 'image-preview w-full h-32 object-cover rounded-md';
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity';
                deleteBtn.innerHTML = '<i class="fas fa-times text-xs"></i>';
                deleteBtn.addEventListener('click', function() {
                    const index = uploadedFiles.indexOf(file);
                    if (index > -1) {
                        uploadedFiles.splice(index, 1);
                    }
                    previewDiv.remove();
                });
                
                previewDiv.appendChild(img);
                previewDiv.appendChild(deleteBtn);
                imagePreviews.appendChild(previewDiv);
            };
        }
        
        // Auto-save draft (Bonus Feature)
        setInterval(function() {
            const formData = {
                productName: document.getElementById('product-name').value,
                category: document.getElementById('product-category').value,
                price: document.getElementById('product-price').value,
                quantity: document.getElementById('product-quantity').value,
                description: document.getElementById('product-description').value,
                location: document.getElementById('delivery-location').value,
                otherLocation: document.getElementById('other-location').value,
                availability: document.getElementById('availability').value,
                // Note: In a real app, you'd need to handle file uploads differently
            };
            
            localStorage.setItem('draftProduct', JSON.stringify(formData));
            console.log('Brouillon enregistr√©');
        }, 10000); // Auto-save every 10 seconds
        
        // Load draft if exists
        window.addEventListener('load', function() {
            const draft = localStorage.getItem('draftProduct');
            if (draft) {
                const formData = JSON.parse(draft);
                document.getElementById('product-name').value = formData.productName || '';
                document.getElementById('product-category').value = formData.category || '';
                document.getElementById('product-price').value = formData.price || '';
                document.getElementById('product-quantity').value = formData.quantity || '1';
                document.getElementById('product-description').value = formData.description || '';
                document.getElementById('delivery-location').value = formData.location || '';
                document.getElementById('other-location').value = formData.otherLocation || '';
                document.getElementById('availability').value = formData.availability || '';
                
                if (formData.location === 'other') {
                    otherLocationContainer.classList.remove('hidden');
                }
                
                // In a real app, you'd also need to handle file uploads
            }
        });
        
        // Form validation
        const validateField = (field, isValid) => {
            if (isValid) {
                field.classList.add('valid-field');
                field.classList.remove('invalid-field');
            } else {
                field.classList.add('invalid-field');
                field.classList.remove('valid-field');
            }
        };
        
        // Real-time validation for required fields
        document.getElementById('product-name').addEventListener('input', function() {
            validateField(this, this.value.trim().length > 0);
        });
        
        document.getElementById('product-category').addEventListener('change', function() {
            validateField(this, this.value !== '');
        });
        
        document.getElementById('product-price').addEventListener('input', function() {
            validateField(this, this.value > 0);
        });
    </script>
</body>
</html>